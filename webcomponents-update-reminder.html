<link rel="import" href="../polymer/polymer.html">

<dom-module id="webcomponents-update-reminder">
  <template>
    <template is="dom-if" if="{{isLocalhost}}">
      <update-reminder-action
        repo="{{repo}}"></update-reminder-action>
      <update-reminder-action
        repo="markhuang1212/webcomponents-update-reminder"></update-reminder-action>
    </template>
  </template>
  <script>
    Polymer({
      is: 'webcomponents-update-reminder',
      properties: {
        repo: String,
      },
      attached: function(){
        var isLocalhost = function() {
          var hostname = window.location.hostname;
          // the following function is copied from "paltinum-http-redirect" element
          return !!(hostname === 'localhost' ||
                  // [::1] is the IPv6 localhost address.
                  hostname === '[::1]' ||
                  // 127.0.0.1/8 is considered localhost for IPv4.
                  hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));
        }

        if (isLocalhost()){
          this.importHref(this.resolveUrl('update-reminder-action.html'), function() {
            this.isLocalhost = true;
          }.bind(this));
        }
      }
    });
  </script>
</dom-module>
